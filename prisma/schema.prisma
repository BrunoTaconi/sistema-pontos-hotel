generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id              Int          @id @default(autoincrement())
  nome            String
  email           String       @unique
  tipoDocumento   String
  numeroDocumento String
  hashSenha       String
  hierarquia      String       @default("usuario")
  telefone        String
  criadoEm        DateTime     @default(now())
  Resgate         Resgate[]
  pontos          Transacoes[]
}

model Transacoes {
  id        Int      @id @default(autoincrement())
  idUsuario Int
  pontos    Int
  tipo      String
  criadoEm  DateTime @default(now())
  usuario   Usuario  @relation(fields: [idUsuario], references: [id])
}

model Recompensa {
  id        Int      @id @default(autoincrement())
  nome      String
  descricao String
  custo     Int
  ativo     Boolean
  criadoEm  DateTime @default(now())
  imagem    String?

  Resgate Resgate[]
}

model Resgate {
  id           Int        @id @default(autoincrement())
  idUsuario    Int
  idRecompensa Int
  criadoEm     DateTime   @default(now())
  recompensa   Recompensa @relation(fields: [idRecompensa], references: [id])
  usuario      Usuario    @relation(fields: [idUsuario], references: [id])
}
